
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Rivet System Architecture</title>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background-color: #f0f0f0; }
        #graph { width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; }
        svg { width: 100%; height: 100%; }
    </style>
</head>
<body>
    <div id="graph">Loading Diagram...</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/viz.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/full.render.js"></script>
    <script>
        var dotLines = `digraph RivetArchitecture {
  rankdir=LR;
  node [fontname="Arial", shape=box, style=filled, fillcolor=white];
  edge [fontname="Arial", fontsize=10];
  graph [style=filled, fillcolor="#eeeeee"];

  subgraph cluster_CommandCenter {
    label = "CommandCenter : GroundControl";
    style = rounded;
    color = black;
    bgcolor = white;
    CommandCenter [label="CommandCenter", shape=component, fillcolor="#d0e0ff"];
    CommandCenter__heartbeat [label="sys/hb\n<int>", shape=ellipse, style=filled, fillcolor="#ddffdd"];
    CommandCenter__system_ready [label="sys/ready\n<bool>", shape=ellipse, style=filled, fillcolor="#ddffdd"];
  }

  subgraph cluster_SensorArray {
    label = "SensorArray : DataCollector";
    style = rounded;
    color = black;
    bgcolor = white;
    SensorArray [label="SensorArray", shape=component, fillcolor="#d0e0ff"];
    SensorArray__reading [label="sense/val\n<float>", shape=ellipse, style=filled, fillcolor="#ddffdd"];
  }

  subgraph cluster_LoggerNode {
    label = "LoggerNode : DataRecorder";
    style = rounded;
    color = black;
    bgcolor = white;
    LoggerNode [label="LoggerNode", shape=component, fillcolor="#d0e0ff"];
    LoggerNode__disk_status [label="disk/stat\n<string>", shape=ellipse, style=filled, fillcolor="#ddffdd"];
  }
  CommandCenter__system_ready -> SensorArray [color=green];
    SensorArray -> SensorArray__reading [color=blue];
  SensorArray__reading -> LoggerNode [color=green];
    CommandCenter -> CommandCenter [style=dashed, label="activate"];
    CommandCenter -> CommandCenter__system_ready [color=blue];
    CommandCenter -> CommandCenter [style=dashed, label="goLive"];
    LoggerNode -> LoggerNode__disk_status [color=blue];
}
`;
        var viz = new Viz();
        viz.renderSVGElement(dotLines)
            .then(function(element) {
                var container = document.getElementById("graph");
                container.innerHTML = "";
                container.appendChild(element);
            })
            .catch(function(error) {
                console.error(error);
                document.getElementById("graph").innerHTML = 
                    "<h3 style='color:red'>Error rendering graph</h3><pre>" + error + "</pre>";
            });
    </script>
</body>
</html>
    